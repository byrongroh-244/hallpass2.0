<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Documentation - HallPass 2.0</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --color-ink: #0f172a;
            --color-slate: #475569;
            --color-cloud: #f1f5f9;
            --color-paper: #ffffff;
            --color-primary: #667eea;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.08);
            --shadow-md: 0 2px 8px rgba(0,0,0,0.08);
        }
        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(to bottom, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
            padding: 2rem;
            color: var(--color-ink);
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        .header {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            margin-bottom: 2rem;
        }
        .header h1 { 
            font-family: 'Fraunces', serif; 
            font-size: 2rem; 
            margin-bottom: 0.5rem;
        }
        .header p { 
            font-size: 0.9375rem;
            color: var(--color-slate);
        }
        
        .content {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
        }
        
        .toc {
            background: var(--color-cloud);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--color-primary);
        }
        
        .toc h2 {
            font-size: 0.875rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--color-ink);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .toc ul {
            list-style: none;
        }
        
        .toc li {
            margin-bottom: 0.5rem;
        }
        
        .toc a {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9375rem;
            transition: color 0.2s;
        }
        
        .toc a:hover {
            color: #5568d3;
        }
        
        .section {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--color-cloud);
        }
        
        .section:last-of-type {
            border-bottom: none;
        }
        
        .section h2 {
            font-family: 'Fraunces', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--color-ink);
        }
        
        .section h3 {
            font-size: 1.125rem;
            margin: 1.5rem 0 0.75rem 0;
            color: var(--color-ink);
            font-weight: 700;
        }
        
        .section p {
            font-size: 0.9375rem;
            line-height: 1.7;
            color: var(--color-slate);
            margin-bottom: 1rem;
        }
        
        .step-list {
            counter-reset: step-counter;
            list-style: none;
        }
        
        .step-list li {
            counter-increment: step-counter;
            position: relative;
            padding-left: 3rem;
            margin-bottom: 1.5rem;
        }
        
        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            width: 2rem;
            height: 2rem;
            background: var(--color-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
        }
        
        .step-list li strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--color-ink);
            font-weight: 600;
        }
        
        .step-list li p {
            margin: 0;
        }
        
        .code-block {
            background: var(--color-ink);
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        .note-box {
            background: rgba(102, 126, 234, 0.05);
            border-left: 4px solid var(--color-primary);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
        
        .note-box.warning {
            background: rgba(245, 158, 11, 0.05);
            border-left-color: var(--color-warning);
        }
        
        .note-box strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--color-ink);
            font-weight: 700;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .note-box p {
            margin: 0;
            font-size: 0.875rem;
        }
        
        code {
            background: var(--color-cloud);
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
        
        .back-link {
            display: inline-block;
            margin-top: 2rem;
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s;
        }
        
        .back-link:hover {
            color: #5568d3;
        }
        
        @media (max-width: 768px) {
            body { padding: 1rem; }
            .header, .content { padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Setup Documentation</h1>
            <p>Complete guide to setting up HallPass 2.0</p>
        </div>
        
        <div class="content">
            <div class="toc">
                <h2>Table of Contents</h2>
                <ul>
                    <li><a href="#firebase">1. Firebase Setup</a></li>
                    <li><a href="#qr-codes">2. Generating QR Codes</a></li>
                    <li><a href="#schedule">3. Creating Your Schedule</a></li>
                    <li><a href="#config">4. Configuration File</a></li>
                    <li><a href="#deployment">5. Deployment (GitHub Pages)</a></li>
                    <li><a href="#testing">6. Testing & Verification</a></li>
                    <li><a href="#updating">7. Updating Your Configuration</a></li>
                </ul>
            </div>

            <div class="section" id="firebase">
                <h2>1. Firebase Setup</h2>
                <p>HallPass 2.0 uses Firebase Realtime Database to sync data across all devices in real-time.</p>
                
                <h3>Create a Firebase Account</h3>
                <ol class="step-list">
                    <li>
                        <strong>Go to Firebase Console</strong>
                        <p>Visit <a href="https://console.firebase.google.com" target="_blank">console.firebase.google.com</a> and sign in with your Google account.</p>
                    </li>
                    <li>
                        <strong>Create a New Project</strong>
                        <p>Click "Add project" and give it a name (e.g., "HallPass-2024"). You can disable Google Analytics unless you want usage statistics.</p>
                    </li>
                    <li>
                        <strong>Add a Web App</strong>
                        <p>In your project dashboard, click the web icon (&lt;/&gt;) to add a web app. Give it a nickname like "HallPass Scanner".</p>
                    </li>
                    <li>
                        <strong>Copy Your Configuration</strong>
                        <p>Firebase will display your config object. Copy all the values - you'll need these later.</p>
                    </li>
                </ol>
                
                <div class="code-block">const firebaseConfig = {
  apiKey: "your-api-key-here",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "your-app-id",
  measurementId: "G-XXXXXXXXXX"
};</div>
                
                <h3>Enable Realtime Database</h3>
                <ol class="step-list">
                    <li>
                        <strong>Navigate to Realtime Database</strong>
                        <p>In the Firebase Console sidebar, click "Build" → "Realtime Database".</p>
                    </li>
                    <li>
                        <strong>Create Database</strong>
                        <p>Click "Create Database" and select your preferred region (usually closest to your location).</p>
                    </li>
                    <li>
                        <strong>Set Security Rules</strong>
                        <p>Start in test mode for now (we'll secure it later). Click the "Rules" tab and paste these rules:</p>
                    </li>
                </ol>
                
                <div class="code-block">{
  "rules": {
    ".read": true,
    ".write": true
  }
}</div>
                
                <div class="note-box warning">
                    <strong>Important</strong>
                    <p>These test rules allow anyone to read/write your database. For production use, implement proper authentication and security rules.</p>
                </div>
            </div>

            <div class="section" id="qr-codes">
                <h2>2. Generating QR Codes</h2>
                <p>QR codes are the physical passes students will scan when leaving and returning to class.</p>
                
                <ol class="step-list">
                    <li>
                        <strong>Open the QR Code Generator</strong>
                        <p>Navigate to the <a href="qr-generator.html">QR Code Generator</a> tool from the home page.</p>
                    </li>
                    <li>
                        <strong>Generate Codes</strong>
                        <p>Click "Generate QR Codes" to create 30 static QR codes (qr_01 through qr_30).</p>
                    </li>
                    <li>
                        <strong>Download and Print</strong>
                        <p>Click "Download All as ZIP" to save all codes. Print them on cardstock paper (recommended: 2x2 inches per code).</p>
                    </li>
                    <li>
                        <strong>Laminate</strong>
                        <p>Laminate the printed QR codes for durability. These will be reused throughout the year.</p>
                    </li>
                </ol>
                
                <div class="note-box">
                    <strong>Pro Tip</strong>
                    <p>The same 30 QR codes can be assigned to different students on Red and Black days, maximizing flexibility with minimal printing.</p>
                </div>
            </div>

            <div class="section" id="schedule">
                <h2>3. Creating Your Schedule</h2>
                <p>Use the Schedule Generator to create your Red/Black day schedules with student rosters.</p>
                
                <ol class="step-list">
                    <li>
                        <strong>Open Schedule Generator</strong>
                        <p>Navigate to the <a href="schedule-generator.html">Schedule Generator</a> tool from the home page.</p>
                    </li>
                    <li>
                        <strong>Configure Periods</strong>
                        <p>For each class period, click "Add Period" and fill in:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li><strong>Period Name:</strong> Use format like "Red1-Algebra" or "Black2-Geometry"</li>
                            <li><strong>Time Range:</strong> Start and end times for the period</li>
                            <li><strong>Student Names:</strong> One name per line (QR codes auto-assigned)</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Generate Code</strong>
                        <p>Click "Generate Schedule Code" when all periods are configured. This creates formatted JavaScript code.</p>
                    </li>
                    <li>
                        <strong>Copy the Code</strong>
                        <p>Click "Copy to Clipboard" to copy your complete schedule configuration.</p>
                    </li>
                </ol>
            </div>

            <div class="section" id="config">
                <h2>4. Configuration File</h2>
                <p>You'll need to embed your configuration directly into each HTML file since GitHub Pages doesn't support loading external JavaScript config files.</p>
                
                <h3>Understanding the Configuration</h3>
                <p>Your configuration contains three main parts:</p>
                <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
                    <li><strong>Firebase credentials:</strong> Connects to your database</li>
                    <li><strong>Timing settings:</strong> Controls scan debounce and cooldowns</li>
                    <li><strong>Schedules:</strong> Your class periods and student rosters</li>
                </ul>
                
                <h3>Embed Configuration in Each File</h3>
                <ol class="step-list">
                    <li>
                        <strong>Open scanner.html</strong>
                        <p>Find the section that says <code>// CONFIGURATION - EDIT THIS SECTION ONLY</code> (usually near line 150).</p>
                    </li>
                    <li>
                        <strong>Replace Firebase Config</strong>
                        <p>Update the firebase section with your credentials from Step 1:</p>
                    </li>
                </ol>
                
                <div class="code-block">firebase: {
    apiKey: "your-api-key-here",
    authDomain: "your-project.firebaseapp.com",
    projectId: "your-project-id",
    storageBucket: "your-project.appspot.com",
    messagingSenderId: "123456789",
    appId: "your-app-id"
}</div>
                
                <ol class="step-list" style="counter-reset: step-counter 2;">
                    <li>
                        <strong>Paste Your Schedule</strong>
                        <p>Replace the schedules section with the code you generated in Step 3.</p>
                    </li>
                    <li>
                        <strong>Repeat for Other Files</strong>
                        <p>Copy the exact same configuration into dashboard.html, analytics.html, and qr-tester.html. Each file has a CONFIG section that needs to be updated.</p>
                    </li>
                </ol>
                
                <div class="note-box warning">
                    <strong>Important</strong>
                    <p>You must update the CONFIG section in all four files (scanner.html, dashboard.html, analytics.html, qr-tester.html) with identical configuration for the system to work properly.</p>
                </div>
                
                <h3>Configuration Template</h3>
                <p>Here's the complete structure you'll be editing in each file:</p>
                
                <div class="code-block">const CONFIG = {
    firebase: {
        apiKey: "your-api-key",
        authDomain: "your-project.firebaseapp.com",
        projectId: "your-project-id",
        storageBucket: "your-project.appspot.com",
        messagingSenderId: "123456789",
        appId: "your-app-id"
    },
    
    timing: {
        scanDebounce: 2000,
        studentCooldown: 5000
    },
    
    schedules: {
        red: {
            regular: [
                {
                    name: "Red1-Algebra",
                    startTime: "07:45",
                    endTime: "09:13",
                    students: {
                        qr_01: "Student Name",
                        qr_02: "Student Name"
                    }
                }
            ],
            late: []
        },
        black: {
            regular: [],
            late: []
        }
    }
};</div>
            </div>

            <div class="section" id="deployment">
                <h2>5. Deployment</h2>
                <p>Get your HallPass system running on your devices.</p>
                
                <h3>Option A: GitHub Pages (Recommended)</h3>
                <p>GitHub Pages provides free HTTPS hosting, which is required for camera access on mobile devices.</p>
                
                <ol class="step-list">
                    <li>
                        <strong>Create GitHub Account</strong>
                        <p>If you don't have one, sign up at <a href="https://github.com" target="_blank">github.com</a> (it's free).</p>
                    </li>
                    <li>
                        <strong>Create New Repository</strong>
                        <p>Click the "+" icon in the top right, select "New repository". Name it something like "hallpass-2024". Make it Public and check "Add a README file".</p>
                    </li>
                    <li>
                        <strong>Upload Your Files</strong>
                        <p>Click "Add file" → "Upload files". Drag and drop all your HTML files:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>index.html</li>
                            <li>scanner.html</li>
                            <li>dashboard.html</li>
                            <li>analytics.html</li>
                            <li>qr-tester.html</li>
                            <li>qr-generator.html</li>
                            <li>schedule-generator.html</li>
                            <li>setup-guide.html</li>
                        </ul>
                        <p style="margin-top: 0.5rem;">Click "Commit changes" to upload.</p>
                    </li>
                    <li>
                        <strong>Enable GitHub Pages</strong>
                        <p>Go to your repository Settings → Pages (in the left sidebar). Under "Source", select "Deploy from a branch", choose "main" branch, and click Save.</p>
                    </li>
                    <li>
                        <strong>Wait for Deployment</strong>
                        <p>GitHub will deploy your site in 1-2 minutes. You'll see a green checkmark and your URL will appear at the top of the Pages settings.</p>
                    </li>
                    <li>
                        <strong>Access Your Site</strong>
                        <p>Your HallPass system will be available at: <code>https://your-username.github.io/hallpass-2024/</code></p>
                    </li>
                    <li>
                        <strong>Bookmark URLs</strong>
                        <p>Save these bookmarks for quick access:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li><strong>Dashboard (computer):</strong> .../dashboard.html</li>
                            <li><strong>Scanner (phone/tablet):</strong> .../scanner.html</li>
                            <li><strong>Analytics:</strong> .../analytics.html</li>
                        </ul>
                    </li>
                </ol>
                
                <div class="note-box">
                    <strong>Updating Your Site</strong>
                    <p>When you need to change schedules or settings, edit the HTML files directly on GitHub. Click the file → pencil icon (Edit) → make changes → Commit. Changes appear in 1-2 minutes.</p>
                </div>
                
                <h3>Option B: Local Files</h3>
                <p>For desktop-only use (dashboard and analytics), you can run files locally.</p>
                
                <ol class="step-list">
                    <li>
                        <strong>Place Files on Computer</strong>
                        <p>Copy all HTML files to a folder on your teacher computer.</p>
                    </li>
                    <li>
                        <strong>Open in Browser</strong>
                        <p>Double-click <code>index.html</code> to open the home page, then navigate to dashboard or analytics.</p>
                    </li>
                </ol>
                
                <div class="note-box warning">
                    <strong>Camera Access Limitation</strong>
                    <p>The scanner will NOT work with local files because QR code scanning requires HTTPS. You must use GitHub Pages (Option A) or another web host for the scanner to function on mobile devices.</p>
                </div>
                
                <h3>Option C: Other Free Hosts</h3>
                <p>Alternative hosting services that also provide HTTPS:</p>
                <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
                    <li><strong>Netlify:</strong> Drag and drop your folder, instant deployment</li>
                    <li><strong>Vercel:</strong> Similar to Netlify, very fast</li>
                    <li><strong>Firebase Hosting:</strong> Good if you're already using Firebase</li>
                </ul>
                <p>All of these work the same way: upload your HTML files and get an HTTPS URL.</p>
            </div>

            <div class="section" id="testing">
                <h2>6. Testing & Verification</h2>
                <p>Before using with students, test your complete system.</p>
                
                <ol class="step-list">
                    <li>
                        <strong>Test QR Codes</strong>
                        <p>Open the <a href="qr-tester.html">Diagnostic Tool</a>, select your schedule, and scan a QR code. Verify it shows the correct student name and unique ID.</p>
                    </li>
                    <li>
                        <strong>Test Scanner → Dashboard Sync</strong>
                        <p>Open dashboard on computer and scanner on phone. Scan a QR code and verify the student appears as "Out" on the dashboard.</p>
                    </li>
                    <li>
                        <strong>Test Complete Cycle</strong>
                        <p>Scan the same QR code again to mark student as "In". Verify the dashboard updates immediately.</p>
                    </li>
                    <li>
                        <strong>Check Analytics</strong>
                        <p>Open analytics.html and verify logs are being recorded with timestamps and durations.</p>
                    </li>
                </ol>
                
                <div class="note-box">
                    <strong>Troubleshooting</strong>
                    <p>If sync isn't working, check your Firebase console to ensure data is being written. Common issues: incorrect Firebase config, blocked database rules, or network connectivity.</p>
                </div>
            </div>
            
            <div class="section" id="updating">
                <h2>7. Updating Your Configuration</h2>
                <p>When you need to change student rosters or schedules throughout the year.</p>
                
                <h3>If Hosted on GitHub Pages</h3>
                <ol class="step-list">
                    <li>
                        <strong>Navigate to Your Repository</strong>
                        <p>Go to github.com and open your hallpass repository.</p>
                    </li>
                    <li>
                        <strong>Edit the File</strong>
                        <p>Click the file you want to update (e.g., scanner.html), then click the pencil icon (Edit this file).</p>
                    </li>
                    <li>
                        <strong>Find the CONFIG Section</strong>
                        <p>Scroll to the JavaScript section with <code>const CONFIG = {</code> (usually around line 150-200).</p>
                    </li>
                    <li>
                        <strong>Update Schedules</strong>
                        <p>You can either:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Manually edit student names and times directly in the code</li>
                            <li>Use the Schedule Generator to create new code and paste it in</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Commit Changes</strong>
                        <p>Scroll down, add a commit message like "Updated Period 1 roster", and click "Commit changes".</p>
                    </li>
                    <li>
                        <strong>Repeat for All Files</strong>
                        <p>Remember to update the CONFIG in dashboard.html, analytics.html, and qr-tester.html with the same changes.</p>
                    </li>
                    <li>
                        <strong>Wait for Deployment</strong>
                        <p>Changes will be live in 1-2 minutes. Refresh your browser to see updates.</p>
                    </li>
                </ol>
                
                <div class="note-box warning">
                    <strong>Keep Config Synchronized</strong>
                    <p>All four files (scanner, dashboard, analytics, qr-tester) must have identical CONFIG sections. If they don't match, you'll see inconsistent student names or missing data.</p>
                </div>
                
                <h3>Quick Mid-Year Updates</h3>
                <p>Common scenarios:</p>
                <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
                    <li><strong>New student:</strong> Add their name to the students list, assigned to an available qr_XX code</li>
                    <li><strong>Student moved classes:</strong> Move their name from one period to another</li>
                    <li><strong>Schedule change:</strong> Update the startTime and endTime for affected periods</li>
                    <li><strong>Semester change:</strong> Use Schedule Generator to create completely new schedules and replace the entire schedules object</li>
                </ul>
            </div>
            
            <a href="index.html" class="back-link">← Back to Home</a>
        </div>
    </div>
</body>
</html>
